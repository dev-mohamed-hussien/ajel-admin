"use strict";(self.webpackChunkAjel_admin=self.webpackChunkAjel_admin||[]).push([[2039,7450,3089],{5645:function(e,n,t){var r=t(9139),a=(t(7313),t(7393)),i=t(5554),o=t(4267),d=t(6417);n.Z=function(e,n){return function(t){var c=(0,i.v9)((function(e){return e.profile})).data;return(0,o.Zu)(e,n,c)?t:function(){return(0,d.jsx)(r.ZP,{status:"403",title:"403",subTitle:(0,d.jsx)(a.Z,{id:"message.unauthorized"})})}}}},9450:function(e,n,t){t.r(n);var r=t(5645),a=t(2171),i=t(34),o=t(7922),d=t(6417);n.default=(0,i.Z)((function(){return(0,d.jsx)(a.default,{})}),[(0,r.Z)(o.config.add.url,o.config.add.type)])},2171:function(e,n,t){t.r(n);var r=t(1413),a=t(9439),i=t(7313),o=t(3591),d=t(6059),c=t(5239),s=t(9918),u=t(2870),l=t(9491),f=t(8197),Z=t(9624),h=t(3375),m=t(685),p=t(5201),g=t(7393),x=t(5554),j=t(8467),v=t(9888),y=t(7515),k=t(9432),P=t(1245),b=t(7922),O=t(5645),S=t(34),w=t(4267),A=t(6417);n.default=(0,S.Z)((function(){var e=(0,j.TH)().pathname.split("/").filter((function(e){return e})),n=("/".concat(e.slice(0,2).join("/")),(0,x.v9)((function(e){return e.profile.data}))),t=(0,x.v9)((function(e){return e.Auth})).idToken,O=(0,x.v9)((function(e){return e.LanguageSwitcher.language})).locale,S=(0,j.UO)().id,B=(0,P.Z)(),N=(0,a.Z)(B,1)[0],C=(0,j.s0)(),E=(0,i.useState)(!1),z=(0,a.Z)(E,2),T=z[0],X=z[1],_=(0,i.useState)(!1),F=(0,a.Z)(_,2),I=F[0],L=F[1],U=(0,i.useState)(!1),q=(0,a.Z)(U,2),Y=q[0],D=q[1],H=(0,i.useState)(!1),K=(0,a.Z)(H,2),R=K[0],V=K[1],W=(0,i.useState)(0),G=(0,a.Z)(W,2),J=G[0],M=G[1],Q=(0,i.useState)([]),$=(0,a.Z)(Q,2),ee=$[0],ne=$[1],te=(0,i.useState)([]),re=(0,a.Z)(te,2),ae=re[0],ie=re[1];return(0,i.useEffect)((function(){V(!0),o.Z.get("permissions",{headers:{"X-Portal":"dashboard",Authorization:"Bearer ".concat(t)}}).then((function(e){ie(e.data.data.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{key:e.id})}))),V(!1)})).catch((function(){D(!1)}))}),[t]),(0,i.useEffect)((function(){S&&(D(!0),o.Z[b.config.findOne.method]("".concat(b.config.findOne.url,"/").concat(S),{headers:{"X-Portal":"dashboard",Authorization:"Bearer ".concat(t)}}).then((function(e){ne(e.data.data.permissions.map((function(e){return e.id}))),N.setFieldsValue(e.data.data),D(!1)})).catch((function(e){D(!1)})))}),[N,S,t]),(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(s.Z,{spinning:Y||R,children:[(0,A.jsx)("div",{className:"flex flex-row-reverse",children:S&&(0,w.Zu)(b.config.delete.url,b.config.delete.type,n)?(0,A.jsx)(u.Z,{title:(0,A.jsx)(g.Z,{id:"delete.deleteItem"}),description:(0,A.jsx)(g.Z,{id:"delete.areYouSure"}),onConfirm:function(){return L(!0),void d.Am.promise(o.Z[b.config.delete.method]("".concat(b.config.delete.url,"/").concat(S),{headers:{"X-Portal":"dashboard",Authorization:"Bearer ".concat(t)}}),{loading:"ar"===O?"\u062c\u0627\u0631\u064a \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629 ":"Pending",success:function(e){var n=e.data.message;return C(-1),L(!1),n||"Backend Error Occured"},error:function(e){var n,t;return L(!1),(null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Backend Error Occured"}})},icon:(0,A.jsx)(v.Z,{style:{color:"red"}}),children:(0,A.jsx)(l.ZP,{loading:I,icon:(0,A.jsx)(y.Z,{}),type:"primary",danger:!0,children:(0,A.jsx)(g.Z,{id:"delete"})})}):""}),(0,A.jsx)(f.Z,{children:(0,A.jsx)(Z.Z,{span:24,children:(0,A.jsxs)(h.Z,{form:N,onFinish:function(e){var n=new FormData;for(var r in e)n.append(r,e[r]);"post"===b.config.edit.method&&S&&n.append("_method","put"),X(!0),d.Am.promise(o.Z[S?b.config.edit.method:b.config.add.method](S?"".concat(b.config.edit.url,"/").concat(S):b.config.add.url,e,{onUploadProgress:function(e){var n=e.loaded/e.total*100;M(n)},headers:{"X-Portal":"dashboard",Authorization:"Bearer ".concat(t)}}),{loading:(0,A.jsxs)("div",{className:"min-w-[200px]",children:["ar"===O?"\u062c\u0627\u0631\u064a \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629 ":"Pending",(0,A.jsx)("div",{children:J?(0,A.jsx)(c.Z,{percent:J}):null})]}),success:function(e){var n=e.data.message;return C(-1),X(!1),M(0),n||"Backend Error Occured"},error:function(e){var n,t;return X(!1),M(0),(null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Backend Error Occured"}})},layout:"vertical",className:"login-form",children:[(0,A.jsx)(h.Z.Item,{label:(0,A.jsx)(g.Z,{id:"table.title.Name"}),name:"name",rules:[{required:!0,message:(0,A.jsx)(g.Z,{id:"table.title.Name"})}],children:(0,A.jsx)(m.Z,{type:"text",size:"large"})}),(0,A.jsx)(h.Z.Item,{name:"permission",label:(0,A.jsx)(g.Z,{id:"permissions"}),rules:[{required:!(ee.length>0),message:(0,A.jsx)(g.Z,{id:"permissions"})}],children:(0,A.jsx)(p.Z,{dataSource:ae,oneWay:!0,showSearch:!0,listStyle:{width:"100%",height:400},targetKeys:ee&&ee,onChange:function(e){ne(e)},render:function(e){return" - ".concat(e.name.replace("_"," "))}})}),(0,A.jsxs)("div",{className:"flex gap-4  flex-wrap mt-8",children:[(0,A.jsx)(l.ZP,{className:"w-[90px]",icon:(0,A.jsx)(k.Z,{}),loading:T,type:"primary",htmlType:"submit",children:(0,A.jsx)("span",{children:(0,A.jsx)(g.Z,{id:"global.save"})})}),(0,A.jsx)(l.ZP,{onClick:function(){return C(-1)},className:"w-[90px]",children:(0,A.jsx)(g.Z,{id:"global.back"})})]})]})})})]})})}),[(0,O.Z)(b.config.edit.url,b.config.edit.type)])},7922:function(e,n,t){t.r(n),t.d(n,{config:function(){return O}});var r=t(1413),a=t(3433),i=t(9439),o=t(7313),d=t(9095),c=t(3566),s=t(2006),u=t(2019),l=t(1741),f=t(9888),Z=t(7515),h=t(8467),m=t(6059),p=t(9491),g=t(2870),x=t(5554),j=t(3591),v=t(7393),y=t(34),k=t(5645),P=t(4267),b=t(6417),O={add:{url:"roles",method:"post",type:"create"},edit:{url:"roles",method:"put",type:"update"},delete:{url:"roles",method:"delete",type:"delete"},findOne:{url:"roles",method:"get",type:"read"}};n.default=(0,y.Z)((function(){var e=(0,h.s0)(),n=(0,x.v9)((function(e){return e.profile.data})),t=(0,x.v9)((function(e){return e.Auth})).idToken,y=(0,x.v9)((function(e){return e.LanguageSwitcher.language})).locale,k=(0,o.useState)(!1),S=(0,i.Z)(k,2),w=S[0],A=S[1];return(0,b.jsx)(d.Z,{config:O,url:"roles",refresher:w,addURL:"add",cols:(0,c._)([(0,r.Z)({title:"name",key:"name",sorter:!0},(0,s.Z)())].concat((0,a.Z)((0,P.Zu)(O.edit.url,O.edit.type,n)||(0,P.Zu)(O.findOne.url,O.findOne.type,n)||(0,P.Zu)(O.delete.url,O.delete.type,n)?[{title:"actions",content:function(r,a){return(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,P.Zu)(O.edit.url,O.edit.type,n)?(0,b.jsx)(p.ZP,{onClick:function(){return e("edit/".concat(a.id))},icon:(0,b.jsx)(u.Z,{},"edit")}):"",(0,P.Zu)(O.findOne.url,O.findOne.type,n)?(0,b.jsx)(p.ZP,{onClick:function(){return e("show/".concat(a.id))},icon:(0,b.jsx)(l.Z,{},"show")}):"",(0,P.Zu)(O.delete.url,O.delete.type,n)?(0,b.jsx)(g.Z,{title:(0,b.jsx)(v.Z,{id:"delete.deleteItem"}),description:(0,b.jsx)(v.Z,{id:"delete.areYouSure"}),onConfirm:function(){return e=a.id,void m.ZP.promise(j.Z[O.delete.method]("".concat(O.delete.url,"/").concat(e),{headers:{"X-Portal":"dashboard",Authorization:"Bearer ".concat(t)}}),{loading:"ar"===y?"\u062c\u0627\u0631\u064a \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629 ":"Pending",success:function(e){var n=e.data.message;return A((function(e){return!e})),n||"Backend Error Occured"},error:function(e){var n,t;return(null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Backend Error Occured"}});var e},icon:(0,b.jsx)(f.Z,{style:{color:"red"}}),children:(0,b.jsx)(p.ZP,{icon:(0,b.jsx)(Z.Z,{}),type:"primary",danger:!0})}):""]})}}]:[])))})}),[(0,k.Z)(O.findOne.url,O.findOne.type)])}}]);